# 履歴書・職務経歴書作成アプリ（ResumeCreater）

iPhone・Android・Windows上でオフライン完結で履歴書・職務経歴書を作成しPDF出力するPWAアプリ。  
基本情報を一度入力すれば保存され、応募先ごとに志望動機等のみ切り替えて即座にPDF生成が可能。

## 技術構成

| 項目 | 技術 |
|------|------|
| アプリ形式 | PWA（Progressive Web App） |
| フロントエンド | HTML / CSS / JavaScript（フレームワーク不使用） |
| PDF生成 | jsPDF 2.5.1 + html2canvas 1.4.1（CDN） |
| データ保存 | IndexedDB |
| 設定保存 | localStorage（アドバンストモード設定） |
| ホスティング | GitHub Pages（HTTPS） |
| オフライン | Service Worker |

## 主な機能

- **履歴書・職務経歴書のPDF生成**: JIS規格風レイアウトで計4ページ（履歴書2P + 職務経歴書2P）を出力
- **データ保存・自動復元**: IndexedDB に個人情報・学歴・職歴・資格を保存し、次回起動時に自動読み込み
- **応募先セット管理**: 企業ごとに志望動機・自己PR・提出日を保存。切替えるだけで新しい書類が完成
- **応募先コピー機能**: 既存の応募先データを複製して効率的に管理
- **年齢自動計算**: 生年月日と提出日から満年齢を自動算出
- **証明写真対応**: カメラ撮影またはファイル選択でアップロード。掲載ON/OFFチェックボックス付き
- **性別欄**: 「未記載」「男」「女」のドロップダウン選択（任意記載）
- **空白行自動調整**: 学歴・職歴・資格の入力数に応じて空白行を自動調整し、2ページに収める
- **アドバンストモード**: 履歴書P1/P2の学歴・職歴行数、資格行数を手動で指定可能。超過時に警告表示
- **データバックアップ**: JSON形式でのエクスポート/インポートに対応
- **完全オフライン動作**: Service Worker により初回アクセス後はインターネット不要
- **マルチプラットフォーム**: iPhone・Android・Windows で「ホーム画面に追加」でネイティブアプリ風に動作
- **モバイル対応**: レスポンシブデザインでスマートフォンでもプレビュー・操作可能
- **リセット機能**: 全データ一括削除（二段階確認付き）

## ファイル構成

```
ResumeCreater/
├── index.html          … SPA エントリーポイント
├── manifest.json       … PWA マニフェスト
├── sw.js               … Service Worker（オフラインキャッシュ）
├── css/
│   └── style.css       … スタイル（A4レイアウト・フォーム・レスポンシブ）
├── js/
│   ├── utils.js        … ユーティリティ（日付計算・エスケープ・Toast等）
│   ├── db.js           … IndexedDB アクセス層
│   ├── templates.js    … 履歴書・職務経歴書 HTMLテンプレート生成
│   ├── pdf-generator.js … PDF生成処理（jsPDF + html2canvas）
│   └── app.js          … メインロジック・UI制御・タブ切替・イベント管理
├── assets/icons/       … PWA アイコン（192px / 512px）
├── doc/
│   └── README.md       … 本ドキュメント
└── sample/             … サンプルデータ
```

## 使用方法

### 初回
1. GitHub Pages の URL にブラウザでアクセス
2. 「ホーム画面に追加」または「アプリとしてインストール」
3. 基本情報・学歴・職歴・資格を入力（自動保存）
4. 応募先を作成し、提出日・志望動機・自己PRを入力
5. プレビューで確認 → PDF保存

### 2回目以降
1. アプリを開く（基本情報は自動復元済み）
2. 応募先管理で「新規作成」→ 企業名・提出日・志望動機を入力
3. プレビュー → PDF保存

### アドバンストモード
1. プレビュー画面で「アドバンストモード」チェックボックスをON
2. 各行数（履歴書P1学歴・職歴行数 / P2行数 / 資格行数）を手動設定
3. 入力データが設定行数を超える場合は黄色の警告バナーが表示される
4. 設定はlocalStorageに保存され、次回起動時に復元される

## システム要件

- **iPhone**: Safari（iOS 14以降推奨）
- **Android**: Chrome（Android 8以降推奨）
- **Windows**: Chrome または Edge
- 初回のみインターネット接続が必要（以降はオフライン動作）

## 変更履歴

### v8 — サンプル完全一致・職務経歴書レイアウト再構築
- **職務経歴書テンプレート再構築**: サンプルPDFの構造を解析し、期間＋職務内容のテーブルレイアウトを導入
  - 左カラム（期間）+ 右カラム（部署・業務内容・成果）の2カラム構造
  - 企業情報テーブルと期間テーブルを罫線で接続
- **フォントサイズ修正**: サンプルPDF解析に基づき正確なサイズに調整
  - 職務経歴書タイトル: 18pt → 14pt
  - 本文: 10.5pt → 10pt
  - 「以上」: 10.5pt → 9pt
- **罫線修正**: 職務経歴書の全テーブル罫線を1px（細線）に統一
- **余白修正**: 履歴書と職務経歴書でサンプル通りの異なる余白を設定
  - 履歴書: 14mm上 / 13mm左右 / 16mm下
  - 職務経歴書: 18mm上 / 20mm左 / 11mm右 / 19mm下
- **ページ番号**: 履歴書は非表示、職務経歴書のみ右寄せで表示（サンプル準拠）
- **「以上」**: 9pt・右寄せ（サンプル準拠）
- **派遣表記修正**: 期間ヘッダーに「派遣先：xxx/ 派遣元：yyy」形式で表示
- **派遣フォーム改善**: チェックボックスを会社名直下に移動、ラベルを「派遣先企業名（派遣の場合）」に変更
- **企業情報テーブル比率**: 85%/15%に調整（サンプル準拠）
- **Service Worker**: キャッシュバージョンを v8 に更新

### v7 — ページ番号・JIS罫線・スマホプレビュー修正
- **ページ番号**: 文書別カウントに修正（履歴書 1/2, 2/2 / 職務経歴書 1/2, 2/2）
- **JIS罫線調整**: 期間ヘッダー・企業情報テーブル・資格テーブルの罫線修正
- **「以上」位置修正**: ページ番号の前に配置
- **スマホプレビュー**: 重なり防止のためスケーリング計算修正、resize/orientationchangeリスナー追加

### v6 — ページ番号・派遣対応・JIS準拠
- **ページ番号追加**: 全4ページにページ番号フッターを追加
- **JIS準拠**: 外枠2px・内枠1px・フォントサイズ調整
- **派遣チェックボックス追加**: 職務経歴入力に「派遣として勤務」チェックボックスと派遣先/元フィールドを追加
- **スマホプレビュー**: JS によるスケーリング機能を追加

### v5 — UI改善・並び替え機能
- **チェックボックスCSS修正**: チェックボックスの表示を修正
- **全リスト並び替え**: 学歴・資格・職務経歴・スキルに上下ボタンを追加
- **セパレータ行高さ修正**: 学歴・職歴間の空白行高さを統一
- **JIS罫線色修正**: 罫線色を #333 → #000 に変更

### v4 — レイアウト修正・アドバンストモード追加
- **写真重なり修正**: 履歴書ヘッダーをFlex配置に変更し、写真と本文の重なりを解消
- **性別セル修正**: 氏名テーブル内に性別セルを正しく表示
- **資格表幅修正**: 職務経歴書の資格テーブルを`width: 100%`に修正
- **ページ番号削除**: 職務経歴書の「1/2」「2/2」表示を削除
- **空白行自動調整**: 入力データ量に応じて空白行数を自動計算し2ページに収める
- **アドバンストモード**: プレビュー画面に行数手動設定パネルを追加。超過時の警告表示付き
- **モバイルプレビュー**: スマートフォンでのプレビュー表示幅・フォントサイズを最適化
- **Service Worker**: キャッシュバージョンを v4 に更新

### v3 — 機能拡充
- 職務経歴入力UIを編集可能カードに変更
- タブナビをスティッキーに変更
- テキストをtext-align: justifyに変更
- 写真掲載ON/OFFチェックボックス追加
- リセットボタン追加（二段階確認付き）
- エクスポート/インポートをJSON形式のみに統一
- スキル削除時の不具合修正
- 月表示を2桁ゼロ埋めに統一

### v2 — 基本改善
- 性別欄をテキスト入力からドロップダウンに変更
- jsPDF CDNリンク修正（cdnjs版に統一）

### v1 — 初版リリース
- 履歴書・職務経歴書4ページPDF生成
- IndexedDBによるデータ保存
- 応募先セット管理
- 証明写真アップロード
- Service Workerによるオフライン動作
- GitHub Pagesでのホスティング